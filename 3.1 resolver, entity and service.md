# 3.1 resolver, entity and service
## Preparation
Install
```bash
npm install -g @nestjs/cli
```
```bash
npm install class-validator
```
Add service
```bash
nest g service <modulename>
```

## Entity Definition
Create the entity file which defines which columns the entity model should contain in postgres db and what fields to expose on GQL queries.

Add custom validation too.

```typescript
// module.entity.ts

import { Field, Int, ObjectType } from "@nestjs/graphql";
import { Column, Entity, PrimaryGeneratedColumn } from "typeorm";

@Entity()
@ObjectType()
export class Pet {
  @PrimaryGeneratedColumn()
  @Field( type => Int)
  id: number;

  @Column()
  @Field()
  name: string;

  @Column({nullable: true})
  @Field({nullable: true})
  type?: string;

  @Column({ unique: true })
  @Field(() => String, { description: `User's email address` })
  @IsEmail()
  email: string;
}
```
__@ObjectType()__: Create a new object in the graphgql schema

__@PrimaryGeneratedColumn()__: Define the column as primary key, and if we pass in 'uuid' then it will generate uuid as id for this entity

__@IsEmail()__: Validator for email input

## The CreatePetInput DTO
A data transfer object (DTO) is an object that carries data between processes. You can use this technique to facilitate communication between two systems (like an API  and your server) without potentially exposing sensitive information.

```typescript
// src/pets/dto/create-pet.input.ts

import { Field, InputType } from "@nestjs/graphql"
import { IsAlpha } from "class-validator"

@InputType()
export class createPetInput {
  @IsAlpha()
  @Field()
  name: string

  @Field({nullable: true})
  type?: string
}
```
__@IsAlpha()__: Validator for name input, need to add ```app.useGlobalPipes(new ValidationPipe())``` in ```main.ts```file.



```typescript

```
```typescript

```
```typescript

```
```typescript

```
```typescript

```
```typescript

```
```typescript

```
```typescript

```
```typescript

```
```typescript

```
```typescript

```

